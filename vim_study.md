# vim术语
## mode
*Normal
模式是“正常模式”，就是一打开时的初始模式，这时候我们输入的每一个字符
会被当做一个命令，我们刚启动 vim时就工作于 normal 模式。
它的主要功能就是控制屏幕光标的移动、进行文本的删除、复
制等文字编辑工作，比如此时的h表示光标向左移动一格。 
* Insert

模式是“插入模式”，这时候和我们的windows 下的
文本编辑器就很相似了，键盘输入什么就在屏幕上显示什么，
比如我们此时敲击键盘上的h表示在屏幕上显示h字符。 
* last line mode
即”底行模式”,它主要用于保存文件或者退出
vim，同时也可以设置编辑环境和一些编译工作，比如列出行号、
查找字符串等等。也有些人把底行模式并入命令模式，这个没
有硬性规定。 
## text object
### char
**必记的hjkl**
* i 在当前光标前进入插入模式即输入状态
* a 在当前光标后进入插入模式即输入状态
### wrod 
* w 表示向后移动到下一个单词的首字母上，可以跨行移动。
* b 则表示移动到前一个单词的首字母上，中文是以标点来计算的
  w 是“word ”的首字母，表示“单词”的意思，
  b 则是“before”的首字母，表示“前一个”。 
* e 表示向后移动到下一个单词的最后一个字母上，
* ge 则表示向前移动到下一个单词的最后一个字母上。
* W and E 大写的最后看有很多字符也被认为是word ，比如“.”，”-“和“)”等都被
认为是一个word ，我们可以自由的定义这些word ，这些我们
到后面讲配置的时候再说
* % : 匹配括号移动，包括 (, {, [. （陈皓注：你需要把光标先移到括号上）
* #:  匹配光标当前所在的单词，移动光标到下一个（或上一个）匹配单词（*是下一个，#是上一个）。 
到后面讲配置的时候再说。 
### line
注意有逻辑行的区别
* $ 命令将光标移动到当前行的行尾
* ^ 则是将光标移动到当前航的第一个非空白字符上。
* 0 命令则把光标移动到当前行的第一个字符上
* ^ 是字符串开始的意思（这里要注意，是s-6=^，别的地方表示C）
* $ 则匹配到字符串的结束。 
    $命令还可以接受一个计数，比如1$会移动到当前行的行尾，
   2$则会移动到下一行的行尾，以此类推。而0命令和^命令的
   前面加上一个计数并没有任何效果，因为它们本身的意义决定
   了它们不需要数字的参与。 
   我们上面说w命令表示向后移动到下一个单词的开始处，没
   错，3w 则 表示向后移动三 个单词， 3b 表示向前移动 三个单词，
   其他数字的功能也是类似的。
* 数字前缀 G（Normal状态模式） 或 :数字（last line mode状态模式）
* gg 到第一行 相当于 1G 或 :1 
* G 最后一行
* o 当前行后插入新行
* O 当前行前插入新行
### f be find
上面我们的移动功能都是一个单字符的命令，下面我们介绍f
加上一个字符的命令，这里的f表示“find”,比如fx表示在当
前位置向下定位到第一个x所在的位置。 
10.上面的f加一个字符表示向右搜索，而F加一个字符表示向
左搜索。 
11.说完了f命令，下面说一下t命令。
### t be to
是“to”的简写，比如
tx表示向右寻找第一个x所在的位置，但是它不是把光标停留
在被搜索的字符上，而是在它之前的前一个字符上。小写的t
表示向右搜索，大写的T表示向左搜索。 
据了两行的空间，但是在逻辑上它们是一行，因为它们之间不
包括任何的换行符。 
### %
它会自动把光标定位到与之对应的括号的
### :set number
来显示行号，也可以用:set nonumber来取消显示行号。 
### G
数字加，再按住shift再按下g键就可以了
## gg
跳到第一行
gg则是gogogo的意思，直接到了第一行。 
## 50%
命令来跳转
到文件的中间位置，用80%命令跳转到文件的百分之八十的位置
##search
emacs be isearch
:/str/                  正向搜索，将光标移到下一个包含字符串 str 的行
:?str?                  反向搜索，将光标移到上一个包含字符串 str 的行
:/str/w file            正向搜索，并将第一个包含字符串 str 的行写入 file 文件
:/str1/,/str2/w file    正向搜索，并将包含字符串 str1 的行至包含字符串 str2 的行写

/加一个单
然后在整个文档中搜索这个单词，然后用数字加n的组合来定位第几个单词。 
如果我们想要单纯的只使用该单词比如xin，那么我们可以用
命令/\<xin\>来做到，其中\<表示匹配一个单词的开头，而\>
则表示匹配一个单词的结束。 
要找到这个explode，就直接在命令模式下用/explode就可以了
###vim是支持正则表达式的
因为正则表达式对于字符
串的匹配来说提供了强劲的支持，vim也自然对搜索有着强劲
的支持。 
^字符匹配一行的开头，
$匹配一行的结尾，
比如/^the$是匹配一行之中只有the这个单词的情况，即我们必须以该单词
开头又必须以该单词结尾，那这一行除了这个单词连空格都不
能有。 
.匹配到任何字符，比如x.g可以匹配xig，还可以匹配
到xinxing 。 
\ 为转义字符前缀，如果我们想匹配“xin.”，但是“.”的地位有点特殊，我们可
以在其前面加一个反斜线表示转义，比如我们用xin\.来匹配
xin.这样子。 
## 操作符命令+位移命令
首先键入一个操作符命令，然后键入一个位移命令，所谓位移命
令，我们上面已经讲过了，只是没提这个概念。 
我们可以用x命令来删除一个字符，使用4x可以删除四个字符。 
## dd and dw and de and d$
没有脱离normal
dd删除整行
命令可以删除一个 word ，d 是“delete”的首字母，表示”
删除“，它后可以跟一个位移命令，它将删除从当前光标起点
到位移的终点处的文本内容，比如d4w是删除四个单词。  
4.还是得说一下的就是d4w和d4e都是可以删除从该光标处向
后的四个单词。 
5.由于$命令是移动光标到行尾，所以d$命令就是删除当前光
标到行尾的内容，而且该行的最后一个字符也会被删除。 
## cc and cw and ce and c$
不过它在命令执行后会进入Insert模式。
比如cw命令会首先删除该word，并且会立即进入插入模式。 
## dd命令可以删除整行，而cc命令则可以改变整行。 
## x其实就是dl，
表示删除当前光标下的字符，
## X命令则是dh
表示删除当前光标左边的字符。
## D表示d$,表示删除到行尾的内容
## C表示c$
 表示修改到行尾的内容
## s表示cl，
即修改一个字符，
## S表示cc
即修改一整行内容。 
## 对于某些喜欢钻牛角尖的童鞋来说，它发现4dw和d4w是
一样的，都是删除四个单词，但是4dw是对dw命令执行了四
次，每次删除一个单词，执行了四次会删除四个单词，而d4w
则是执行了一次命令，删除了四个单词。比如4d2w 则是每次
删除两个单词，重复删除4次，因此共计删除了八个单词。 
## r命令则是把当前位置的字符被我们键入的字符所替换，比
如rx则是用x来替换当前位置的字符，而5rx 表示从该字符 之
后的五个字符都是用x来替换。 
## 而我们用r之后按回车键，则会删除一个字符并且插入一个
换行符，
## 而r4<Enter> 即我们按下r键和4键之后再按回车，
会把接下来的四个字符替换为一个换行符。 

## . 命令
vim下重复操作很简单，
我们使用.命令。 
输入/a来找到所有的a字符，截图
然后我们用在命令模式下键入clb ，此时我们把这里的a换成
了b，然后我们在用Esc键退回到命令模式下： 
 
5.然后我们用n命令来找到下一个被查找出的a字符，如下截
图： 2014年辛星vim 教程秋季版 
 
6.然后我们键入一个.然后我们会发现： 
 
7.然后我们多按几次n命令和.命令，之后发现： 
## p
命令把它取出来，这里的p是put的意思，即“拿出，取出”，
如果单纯的为了记忆，理解为 paste也不错，即“粘贴”，但是
它并不是 vim的思维模式，是微软党的思维模式。 
3.如果我们删除的一整行的内容，比如使用了dd命令，那么p
命令会把整个文本行都放到光标下面作为单独的一行。如果我
们删除的是一行的部分内容，比如一个word ，那么p命令就
会把这部分内容放到当前光标的后面。 
## P
命令（大写的P）和小写的p命令很相似，只是它会把该内
容粘贴到光标字符之前。对于dd删除的整行内容，我们用P
命令会把它放到当前行的上一行，对于dw删除的部分内容，P
会把它放到光标之前。 
5.就像一次复制可以多次粘贴一样，我们可以多次重复使用p
命令。 
6.该命令依然支持命令计数，比如3p命令表示把被删除的3份
副本放到当前位置。 
7.这里说一个小窍门把：有时候我们会一时打错东西，比如把
the打成了teh，那么我们可以在命令模式下用dlp或者xp来
把teh换成the，dl和x命令都表示删除e字符，而p会把它粘
贴到h字符之后。 
## y 
* yy->相当于ddp
命令，这里←的y是“yank ”的意思，翻译成汉语即“拉，抽”。
9.其实用copy来表示复制更好理解点，但是很可惜c命令同时
也是“change ”的第一个字母，该命令用于表示修改，所以也
就没办法用c命令表示复制了，只能用yank 的y命令表示复制。  
10.就像我们的d4w表示剪切四个word 一样，我们的y4 w表
示复制四个word 。 
11.需要注意的是，y4w 会把wo rd之后的空白字符也给复制过
去，如果我们不想复制该空白字符，那么我们可以用y4e 。 
12.就像dd表示删除一行一样，我们可以 用yy来表示复制一
行，Y命令也是复制整行的内容，
## y$命令则是复制当前光标
所在位置至行尾的命令。 
## <start position><command><end position>
例如 0y$ 命令意味着：
0 → 先到行头
y → 从这里开始拷贝
$ → 拷贝到本行最后一个字符到后面讲配置的时候再说。 
到后面讲配置的时候再说。 
## visual模式
1.在命令模式下键入v可以进入visual模式，该模式即“可视模
式”，我们可以用Esc命令退出visual模式，返回到命令模式。 
2.删除一些简单的文本对象我们用操作符命令+位移命令就足够
了，但是对于我们想精确地指定范围，就必须使用visual模式
### j命令表示向下再选中一行
### k命令向上选中一行
比如jj就是向下再选中两行，而4j就是
向下再选中四行。 
### 这里的hjkl命令
表示光标 移动的命令 在这里都是 可用的，
这里的gg则是表示从光标所在位置一直选中到开头部分。 
## 该单词的开头位置然后用dw，
我们直接用daw就可以了，这里的d是delete的意思，而aw
则是a word 的意思，表示“一个单词”，我们删除了该光标所
在的单词，同时，它还会删除该单词末尾的空格。 
上面我们使用了文本对象aw，除此之外还有is表示inner 
sentence 的意思，as 表示a sentence的意思。 
5.如果我们想删除一个句子，我们也希望删除它后面的空白，
就用das，如果我们用新的文本替换它，空白是保留下来的，那
么就用cis 就好了。
## diw
表示删除当前光标所在的word （不包括空白），
## daw
表示删除当前光标所在的word （包括空白），
## dG
表示删除当前行至行尾的内容，而 
## dgg
表示删除当前行至 文 件头的内容。 
## c命令代替d命令就表示替换，而
## y命令代替d命令就表示yank ，即“复制”。 
## R 替换模式
1.有时候我们希望用新输入的文本来代替那些已经存在的文本，
此时就可以在命令模式下输入R来进入替换模式。 
*******************小结**************************** 
1.这一节我们的知识点主要分为两大块。 
2.第 一 大块 就是 知 道如 何 移动 光标 ， 比如 左 下上 右地 移 动光 标 ，
比如如何一次移动四个单词这样的移动方式。 
3.第二大块就是知道如何对文本进行操作，比如剪切、赋值、
粘贴、搜索、替换、重复执行命令等一系列操作。 
4.vim的操作无难度，它是一学就会的，但是想要用起来得心
应手，还是需要大量的练习的，还有就是对各种命令的记忆。 
# file
新建、打开、保存、另存为等几个功能菜单了，vim既然是
上古神器，那么功能自然更加强劲，但是我们先学这几个。 
2.这些命令如果读者记不住怎么办呐？如果你使用的是gvim的
话，可以点击一下“文件”菜单，可以看到它后面并不是跟的
快捷键，而是各种命令，看图： 2014年辛星vim 教程秋季版 
## :e
后加一个文件路径打开一个文件
## :w
* 不加文件名就是保存当前
* 后加上另外的文件名的方式来保存它，等于多了一个副本，且当前窗口不变。
可加路径。 
## :sav
* 另存，等同于:w加另外的文件名，但当前窗口为另存的这个文件的窗口。
## :enew
## :close
## :wqa
保存后退出
## q! and qa!
#:set
## :set filetype=php
## :set  background=dark
(注：默认的情况下使用的background 是light) 
## :colors cheme evening
其实很多选项都可以写到配置文件里去，这样就会方便我们
的操作了，而且更多的设置语法高亮的用法大家就要求助谷哥
哥和度娘了，我不能写这个占太多篇幅。 
#screen翻屏
Ctrl+f 向前翻屏
Ctrl+b 向后翻屏
Ctrl+d 向前翻半屏
Ctrl+u 向后翻半屏
#window多窗口显示
## :split
## :close
## :only
来关闭其他窗口。 
## :split  qian.php
## :vsplit
# :tabedit  xin
tabedit是tab (标签页)和edit(编辑)的合写，
# _vimrc
#. command
* 重复上一次的命令，是你进入插入状态后当次的所有输入字符（含回车与空格）动作
* 加前缀数字就是重复此数字的次数


#宏命令_记录与回放
.命令可以重复最近一次的编辑操作，但是，当我们操作很复杂的时候，或
者我们需要重复的操作变多的时候，又该怎么办呢? 
2.强劲的vim自然也考虑到了这一点，
在vim中我们这么做通
##使用q{寄存器名}
开始命令，后续的操作会被记录到该寄存器中，这里的寄存器名必须是a到z之间的
一个字母。第二步，执行我们的那些繁杂的操作。第三步，按
下q表示结束对命令的录制。 
3.我们可以通过@{寄存器名}命令来执行刚刚记录下来的宏了。
其实，支持宏的文本编辑器还是有不少的，但是，支持的比
vim还强大的，倒是没几个。 
8.然后咱们执行命令3@x,之后效果如下： 2014年辛星vim 教程秋季版 
 
10.由于我们最多可以定义a-z等26个字母可用，因此，我们可
以定义最多26个宏，这对于简化咱们的操作是很不错的。 
宏，说明一下，这里的”是双引号，这里的x是咱们的宏的名字，
如果你并没有用x作为宏的名字，那么相应的命令替换为你的
宏名，下面是该宏的截图： 
#undo and redo
u c-r
#:s
命令或者其全称:substitute命令。 
：s/查找字符/替换字符/[可选的修饰符] 
##可选的修饰符
* ：g表示替换该
行所有的符合的目标字符串，
* p表示列印
* c表示每次执行替换
的时候都需要请求确认，如果这个地方什么都不写，表示只是
替换第一个匹配到的字符串。 
* s前面加一个范围参数，比如1,5就表示从第一
行开始，到第五行结束，而且它是包括第一行和第五行的。 
* 如果我们只想修改第4行的内容，可以
用:4s/in clude/qian /g 这个命令。 
#:g
命令就是传说中的全局命令，它的全称是:global, 意思是
“全局的”，它允许我们找到某个匹配模式的行然后将命令作
用到它上面。 
##:[范围参数]g/{模式}/{可执行的vim命令} 
它和我们的:s命令很像，而且:g中的所谓的命令都必须以:开
头，而命令模式下的命令不能直接用。 
这里没想到很好的例子，于是就引用点大家还没有学习的命
令把，不用太担心，知道怎么回事就可以了。 
5.下面我们在同一个文件下操作，咱们写如下的vim命令： 
主要是宏、查找和替换。 
#替换字符串的细节
1.好像我前面说过了，这里还是再说一下把，那就是我们用:s来
进行正则替换的时候。如果我们要替换的是一个单词，而不是
特定的某个文 档，那么可 以用 \<来 表示开头， 用 \>来表 示结尾。  
2.比如下面的这段文字以及下面我输入了修改的命令： 
 
3.下面我们会发现所有带有xing 字符串的东西都被修改了，于
是乎，我们就有了如下凌乱的形式： 2014年辛星vim 教程秋季版 
4.下面我们只是把“xing”换成“小倩”，而“xinxi ng”则不
予改动，先看命令怎么写： 
#统计信息
1.有时候我们写了长长的一段，比如如下截图： 
 
2.那么我们可以在命令模式下先用g命令，然后Ctrl加G的命
令，统计一下字数，比如我们执行完毕这些命令之后截图： 
#命令行补齐和历史记录
1.由于我表达能力很稀松，所以很多技巧我也不知道如何去表达。 
2.但是vim是支持命令行补齐的，这就方便了我们写命令行的
时候的工作量，虽然很多其他编辑器也支持，但是无疑vim在
这方便并不差。 
3.比如我们输入了:s，我们移动键盘上的↑(就是向上的箭头的
那个按键),然后会发现如下的截图： 
 
4.继续按几下该键，会发现更多的历史记录被翻出来，我们可
以通过该历史记录来查看过往的操作，更重要的就是重用它们
了，当我们要执行一个类似的操作的时候，只需要重复它就可
以了。 
5.所谓的自动补全就是用tab键来补全，比如我们输入:s的话，
直接按tab键，会自动补齐为:sNext这个命令。 

 2014年辛星vim 教程秋季版 
 
 56 / 71 
 
*************viminfo*********************** 
1.很多编辑器都有一个弊病，那就是对连续工作支持地不够，至
少是不够彻底。 
2.比如我在某个时刻进行了某些操作，但是当我关闭该编辑器
之后，发现很多设置就消失的无影无踪了，于是我只能重新去
设置这些东西，这就非常烦了。 
3.再比如我在这个电脑上的一些工作，我把一些文件上传到网
盘里，结果当我在另一台电脑上用同一个软件打开的时候，结
果这两个软件的设置不一样(不同电脑上的统一软件设置不一样
很正常，因为大家的习惯不一样)，这就很让人头疼。 
4.但是自从有了viminfo，妈妈再也不用担心我的学习了，我们
先把到现在的记录保存到viminfo 中，看下面命令： 
 
5.然后我们到E盘下找到这个文件，看下效果图： 
 
6.然后我们用vim打开它，看看效果： 
 
7.我们也可以用rviminfo 来读取该文件的一些配置信息来使得
我们当前的文件设置正确： 
   
8.对于该info 文件，我们也可以手动向其中写入信息和设置信
 
9.而该viminfo 有时候还和session一起用来发挥其强大的威力，
下面我们再说。 
 
 
 
#session
1.像我这种搞web 出身的对cookie 和session是熟的不能再熟
了，对于搞其他行业出身的，我不知道大家对session的理解是
什么样的。 
2.有时候我们辛辛苦苦工作了一天，需要去睡觉了，我们明天
接着干，这个时候，我们需要把目前的状态保存起来，这就是
vim中所用到的session。 
3.所谓session，就是一个会话，咱们vim中的会话包含咱们编
辑活动的所有信息，包括文件列表、窗口布局、全局变量、选
项和一些杂七杂八的东西。 
4.咱们用:mksession  E:\xinxi ng.vim来保存该会话文件，看下面
截图： 
session and viminfo
1.它们两个都能保存一些当前的操作信息，但是性质不同。 
2.session里面会记住一些比如上次的窗口位置、窗口大小、包
括映射和各个session选项都是一样的。 
3.viminfo 包括的信息主要包括标记、寄存器和命令历史记录，
这些都是session所不会记录的。 
4.我们可以在结束当天工作的时候先使用:mksession，然后使
用:wviminfo ，然后在开始新一天的工作的时候先用:sour ce，然
后我们用:rviminfo 。 
#文件浏览
1.比如我打开了一个python文件，下面我们可以用:edit . 来查
看它所在目录下的文件，值得注意的是，后面的.不能忽略，否
则不是浏览当前目录，而是会显示当前的文件名，如下截图： 
 
3.可能大家也注意到了，每次我写入文件的时候，都是指定了
盘符的绝对路径，那我用相对路径会怎么样呢？ 
4.如果大家使用过zendstudio 或者vs studio 之类的，会发现我
们需要设置一个工作目录，没错，vim也需要设置当前的工作
目录，
##:pwd
来查看当前的工作目录： 
##:cd
来设置当前的工作目录，比如我把下面
的工作目录设置为D盘下的www子目录
##:find
文件名的方式来查找文件，它是在当前的
工作目录下查找的，比如我在桌面上的xin.txt使用:find my.py
命令，效果如下： 
然后我们键入回车的时候，发现截图如下：
#程序员必备知识 
1.有些知识对于程序员特别重要，但是对于那些普通的文本编辑
来说可以忽略甚至是根本无用的知识。 
2.我 们 把这 部分 内 容拿 出 来， 希望 做 一个 稍 微系 统一 点 的总 结。  
##代码折叠
1.我想代码折叠的重要性就不说了，不过由于vim过于强大，
支持好多种代码折叠的方式，我们这里只看最简单的通过缩进
来折叠代码的简单情形。 
2.由于我学过的所有语言中认为python对于代码缩进是最严格
的，因此咱们就用Python代码为例来说明： 2014年辛星vim 教程秋季版 
3.下面咱们设置一下折叠的方式，命令:set  foldmethod=indent
来设置，看下面截图： 
4.然后我们折叠代码了，我们用zm来进行折叠，用zo来展开
这个折叠，也可以用zR来展开所有的折叠。 
5.比如我们把光标移动到第一个if判断语句那里，然后执行zm
命令来折叠代码，然后到else那里折叠一次，效果如下： 2014年辛星vim 教程秋季版 
##函数声明进行折叠，即执行zm命令
下面截图： 
 
7.然后我们可以在该行上用zo命令来打开该折叠，我们首先需
要把光标定位到需要展开的层次上去。值得注意的是，当我们
用zm来折叠的时候，光标在上层，当我们用zo来展开折叠的
时候，光标在折叠成一行的那部分，而不能在它的上面一行代
码处，否则vim会找不到折叠层次。下面是我定位到光标的位
置： 
8.之后我们就可以展开折叠代码了，展开之后的效果图： 
9.我们直接用zR来展开所有的折叠层次，如下截图： 
10.下面我们再引入一个折叠层次的概念吧，这个折叠层次就是
##foldlevel，它和foldmethod一样，也是用:set 命令来设置，
它是一个数字，加入我们设置foldlevel为0的时候，它就只能显
示一层，剩下的代码就会全部折叠起来。 
11.我们下面直接通过设置foldlevel为0，代码如下： 
 
12.当我们按下回车的那一刻，效果如下： 
13.那么，当我们设置foldlevel为1的时候，它的情形是这样子
的： 
 
14.不得不说，vim的折叠太强大了，它可以手工折行、根据缩
进折行、根据标记折行、根据语法折行、根据表达式折行等很
多折行功能。 
15.我的意思是，咱们先掌握一种最基本的折叠代码的方式，然
后其他的慢慢研究，先学习主干知识。 
